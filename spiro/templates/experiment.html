{% extends "layout.html" %}
{% block title %}Experiment view{% endblock %}
{% block content %}
{% if status == "Stopping" %}
<meta http-equiv="refresh" content="10">
{% endif %}
<div id="layout">
<div class="pure-g">
<div class="pure-u-1-5" id="leftbar">
<h1>SPIRO</h1>
<div>
<h2>Experiment info</h2>
{% if running %}
<p><b>Experiment is running</b></p>
<p>Status: <b>{{ status }}</b></p>
<p>Saving to directory: {{ directory }}</p>
<p>Started: {{ starttime }}</p>
<p>Ends: {{ endtime }}</p>
<p>Remaining disk space: {{ diskspace }} GB</p>
</div>
<div>
<form method="post" class="pure-form">
<div class="pure-controls">
<input type="hidden" name="action" value="stop">
<button type="submit" class="pure-button pure-button-primary">Stop experiment</button>
</div>
</form>
</div>
{% else %}
<p><b>System is idle</b></p>
<p>Remaining disk space: {{ diskspace }} GB</p>
</div>
{% endif %}
</div>
<div class="pure-u-4-5" id="main">
<div class="pure-menu pure-menu-horizontal" id="topmenu">
<ul class="pure-menu-list">
<li class="pure-menu-item"><a href="/live/on" class="pure-menu-link">Live view</a></li>
<li class="pure-menu-item"><a href="/live/off" class="pure-menu-link">Still image view</a></li>
<li class="pure-menu-item pure-menu-selected"><a href="/experiment" class="pure-menu-link">Experiment control</a></li>
</ul>
</div>
{% if running %}
<div>
<img src="lastcapture.jpg" class="pure-img">
{% else %}
<div id="runcontrol">
<form method="post" class="pure-form pure-form-aligned">
<fieldset>
<input type="hidden" name="action" value="start">
<legend class="label">Start new experiment</legend>
<div class="pure-control-group">
<label for="directory">Directory</label>
<input id="directory" type="text" placeholder="experiment1">
</div>
<div class="pure-control-group">
<label for="duration">Duration</label>
<input id="duration" type="number" value="7" min="1">
<span class="pure-form-message-inline">days</span>
</div>
<div class="pure-control-group">
<label for="delay">Delay between images</label>
<input id="delay" type="number" value="60" min=1 max=1440>
<span class="pure-form-message-inline">minutes</span>
</div>
<div class="pure-controls">
<button type="submit" class="pure-button pure-button-primary">Start experiment</button>
</div>
</fieldset>
</form>
{% endif %}
</div>
</div>
{% endblock %}
